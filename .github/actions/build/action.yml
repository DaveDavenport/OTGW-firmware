name: arduino-cli build
description: Build using arduino-cli and makefile 


runs:
  using: composite
  steps:
    - id: build
      run: make -j$(nproc)
      shell: bash
    - id: filesys
      run: make build/littlefs.bin
      shell: bash
    - id: upload
      uses: actions/upload-artifact@v3
      with:
        name: tarballs
        path: |
          build/**/*.bin
          build/**/*.elf
          build/littlefs.bin
